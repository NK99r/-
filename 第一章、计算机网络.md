# 第一章、计算机网络概述

## 1.1  Internet概述

#### **Internet 发展**

![Internet概述](img/第一章/Internet概述.png)

#### **互连网与互联网**

互连网：指在局部范围互连起来的计算机网络。

互联网：指当今世界上最大的计算机网络。 Internet。

#### **互联网的两个重要特点**

互联网具有两个重要基本特点：

**连通** (connectivity)

- 使上网用户之间都可以交换信息（数据，以及各种音频视频） ，好像这些用户的计算机都可以彼此直接连通一样。
- 注意，互联网具有虚拟的特点，无法准确知道对方是谁，也无法知道对方的位置。

**共享** (Sharing)

- 指资源共享。
- 资源共享的含义是多方面的。可以是信息共享、软件共享，也可以是硬件共享。

## 1.2  互联网概述.

### 1.2.1  网络的网络

**互联网** (Internet)

​	特指Internet，起源于美国ARPANET，现已发展成为世界上最大的、覆盖全球的计算机网络。

**计算机网络** (简称为网络)

​	由若干结点(node)和连接这些结点的链路(link)组成。

**互连网** (internetwork 或 internet)

​	可以通过路由器把网络互连起来，这就构成了一个覆盖范围更大的计算机网络，称之为互连网。

​	“网络的网络”(network of networks)。

![](images/QQ截图20200322003831.png)

**关于“云”**

当使用一朵“云”来表示网络时，可能会有两种不同的情况：

- 云表示的网络已经包含了和网络相连的计算机。
- 云表示的网络里面就只剩下许多路由器和连接这些路由器的链路，把有关的计算机画在云的外面。习惯上，与网络相连的计算机常称为主机 (host)。

![](images/QQ截图20200322003956.png)



### 1.2.2  互联网基础结构发展的三个阶段

#### 第一阶段：

- 从单个网络 ARPANET 向互联网发展的过程。 
- 1983 年， TCP/IP 协议成为 ARPANET 上的标准协议，使得所有使用 TCP/IP 协议的计算机都能利用互连网相互通信。
- 人们把 1983 年作为互联网的诞生时间。
- 1990年，ARPANET 正式宣布关闭。

#### 第二阶段：

建成了三级结构的互联网。 

它是一个三级计算机网络，分为主干网、地区网和校园网（或企业网）。

![](images/QQ截图20200322004350.png)

#### 第三阶段：

逐渐形成了多层次 ISP 结构的互联网。 

出现了互联网服务提供者 ISP (Internet Service Provider)。

任何机构和个人只要向某个 ISP 交纳规定的费用，就可从该 ISP 获取所需 IP 地址的使用权，并可通过该 ISP 接入到互联网。

根据提供服务的覆盖面积大小以及所拥有的 IP 地址数目的不同，ISP 也分成为不同层次的 ISP：主干 ISP、地区 ISP 和 本地 ISP。

![](images/QQ截图20200322004448.png)

**万维网** **WWW** **的问世**

互联网的迅猛发展始于 20 世纪 90 年代。由欧洲原子核研究组织 CERN 开发的万维网 WWW  (World Wide Web) 被广泛使用在互联网上

### 1.2.3  互联网的标准化工作

互联网的标准化工作对互联网的发展起到了非常重要的作用。

![](images/QQ截图20200322004759.png)

**成为互联网正式标准要经过三个阶段**

<u>所有互联网标准都以 RFC 的形式在互联网上发表。</u>

- 互联网草案 (Internet Draft) ——有效期只有六个月。在这个阶段还不是 RFC 文档。
- 建议标准 (Proposed Standard) ——从这个阶段开始就成为 RFC 文档。
- 互联网标准 (Internet Standard) ——达到正式标准后，每个标准就分配到一个编号 STD xxxx。 一个标准可以和多个 RFC 文档关联。

**各种 RFC 之间的关系** 

除了建议标准和互联网标准这两种 RFC 文档外，还有三种 RFC 文档，即历史的、实验的和提供信息的 RFC 文档。

![](images/QQ截图20200322004922.png)



## 1.3  互联网的组成

### 1.3.1  互联网的边缘部分

从互联网的工作方式上看，可以划分为两大块：

(1) 边缘部分： 由所有连接在互联网上的主机组成。这部分是用户直接使用的，用来进行通信（传送数据、音频或视频）和资源共享。

(2) 核心部分：由大量网络和连接这些网络的路由器组成。这部分是为边缘部分提供服务的（提供连通性和交换）。

**互联网的边缘部分与核心部分**

![](images/QQ截图20200322005044.png)

处在互联网边缘的部分就是连接在互联网上的所有的主机。这些主机又称为端系统 (end system)。

**端系统之间通信的含义**

<u>即“主机 A 的某个进程和主机 B 上的另一个进程进行通信”。简称为“计算机之间通信”。</u> 

端系统之间的通信方式通常可划分为两大类：

**1.  客户服-务器方式(C/S)**

- 客户 (client) 和服务器 (server) 都是指通信中所涉及的两个应用进程。
- 客户服务器方式所描述的是进程之间服务和被服务的关系。
- 客户是服务的请求方，服务器是服务的提供方。

<u>服务请求方和服务提供方都要使用网络核心部分所提供的服务。</u>

![](images/QQ截图20200322005355.png)

**客户软件的特点** 

- 被用户调用后运行，在打算通信时主动向远地服务器发起通信（请求服务）。因此，客户程序必须知道服务器程序的地址。
- 不需要特殊的硬件和很复杂的操作系统。 
- 一种专门用来提供某种服务的程序，可同时处理多个远地或本地客户的请求。
- 系统启动后即自动调用并一直不断地运行着，被动地等待并接受来自各地的客户的通信请求。因此，服务器程序不需要知道客户程序的地址。
- 一般需要强大的硬件和高级的操作系统支持。

<u>客户与服务器的通信关系建立后，通信可以是双向的，客户和服务器都可发送和接收数据。</u>

**2.对等连接方式(P2P)** 

- 对等连接 (peer-to-peer，简写为 P2P) 是指两个主机在通信时并不区分哪一个是服务请求方还是服务提供方。
- 只要两个主机都运行了对等连接软件 (P2P 软件) ，它们就可以进行平等的、对等连接通信。
- 双方都可以下载对方已经存储在硬盘中的共享文档。 

**对等连接方式的特点**

1. 对等连接方式从本质上看仍然是使用客户服务器方式，只是对等连接中的每一个主机既是客户又是服务器。
2. 例如主机 C 请求 D 的服务时，C 是客户，D 是服务器。但如果 C 又同时向 F提供服务，那么 C 又同时起着服务器的作用。

<u>对等连接工作方式可支持大量对等用户（如上百万个）同时工作。</u>

![](images/QQ截图20200322005702.png)





### 1.3.2  互联网的核心部分

- 网络核心部分是互联网中最复杂的部分。
- 网络中的核心部分要向网络边缘中的大量主机提供连通性，使边缘部分中的任何一个主机都能够向其他主机通信（即传送或接收各种形式的数据）。
- 在网络核心部分起特殊作用的是路由器 (router)。 
- 路由器是实现分组交换 (packet switching) 的关键构件，其任务是转发收到的分组，这是网络核心部分最重要的功能。

#### **1. 电路交换的主要特点**

![电路交换](img/第一章/电路交换.png)

2 部电话机只需要用 1 对电线直接连接就能够互相通话。 

![](images/QQ截图20200322005838.png)

<u>5 部电话机两两直接相连，需 10 对电线。</u>

![](images/QQ截图20200322005922.png)

<u>N 部电话机两两直接相连，需 N(N – 1)/2 对电线。这种直接连接方法所需要的电线对的数量与电话机数量的平方（ N2 ）成正比。</u>

![](images/QQ截图20200322010006.png)

#### **2. 分组交换的主要特点** 

分组交换则采用存储转发技术。

**添加首部构成分组**

每一个数据段前面添加上首部构成分组(packet)。

**分组交换的传输单元**

分组交换网以“分组”作为数据传输单元。

依次把各分组发送到接收端（假定接收端在左边）。每一个分组的首部都含有地址（诸如目的地址和源地址）等控制信息。
分组交换网中的结点交换机根据收到的分组首部中的地址信息，把分组转发到下一个结点交换机。
每个分组在互联网中独立地选择传输路径。
用这样的存储转发方式，最后分组就能到达最终目的地。

![](images/QQ截图20200322010557.png)



**分组交换网的示意图**

![](images/QQ截图20200322011106.png)



![三种交换对比](img/第一章/三种交换对比.png)

## 1.4  计算机网络的类别

![网络分类](img/第一章/网络分类.png)



## 1.5  计算机网络的性能

### 1.5.1  计算机网络的性能指标

#### 1. 速率

![速率](img/第一章/速率.png)

#### 2. 带宽

![带宽](img/第一章/带宽.png)

**在时间轴上信号的宽度随带宽的增大而变窄。**     

![](images/QQ截图20200322093320.png)



#### 3. 吞吐量

![吞吐量](img/第一章/吞吐量.png)

#### 4. 时延 (delay 或 latency)

时延 (delay 或 latency) 是指数据（一个报文或分组，甚至比特）从网络（或链路）的一端传送到另一端所需的时间。

有时也称为延迟或迟延。

![时延](img/第一章/时延.png)



##### (1) 发送时延

也称为传输时延。

发送数据时，数据帧从结点进入到传输媒体所需要的时间。

也就是从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕所需的时间。 

##### (2) 传播时延

电磁波在信道中需要传播一定的距离而花费的时间。 

发送时延与传播时延有本质上的不同。

信号发送速率和信号在信道上的传播速率是完全不同的概念。 

##### (3) 处理时延

主机或路由器在收到分组时，为处理分组（例如分析首部、提取数据、差错检验或查找路由）所花费的时间。 

```
总时延 = 发送时延 + 传播时延 + 处理时延  
```

<u>必须指出，在总时延中，究竟是哪一种时延占主导地位，必须具体分析。</u>

![时延主导](img/第一章/时延主导.png)

**四种时延所产生的地方 ：**

假设从结点 A 向结点 B 发送数据

![](images/QQ截图20200322093718.png)

**容易产生的错误概念** 

对于高速网络链路，我们**提高的仅仅是数据的发送速率而不是比特在链路上的传播速率。** 

提高链路带宽减小了数据的发送时延。 以下说法是错误的：

<u>“在高速链路（或高带宽链路）上，比特会传送得更快些”。</u>

#### 5. 时延带宽积

![时延带宽积](img/第一章/时延带宽积.png)

#### 6. 往返时间 RTT

![往返时间RTT](img/第一章/往返时间RTT.png)

地球同步卫星距离地球36000公里，除以光速得到卫星链路的传播时延约为240ms

#### 7. 利用率

![利用率](img/第一章/利用率.png) 





## 1.6  计算机网络的体系结构

### 1.6.1  计算机网络体系结构的形成

**两种国际标准**

法律上的 (de jure) 国际标准 OSI 并没有得到市场的认可。

非国际标准 TCP/IP 却获得了最广泛的应用。TCP/IP 常被称为事实上的 (de facto) 国际标准。

![体系结构](img/第一章/体系结构.png)

![原理体系结构](img/第一章/原理体系结构.png)

### 1.6.2  协议与划分层次

计算机网络中的数据交换必须遵守事先约定好的规则。 

这些规则明确规定了所交换的数据的格式以及有关的同步问题（同步含有时序的意思）。

网络协议 (network protocol)，简称为协议，是为进行网络中的数据交换而建立的规则、标准或约定。 

**网络协议的三个组成要素** 

语法：数据与控制信息的结构或格式 。 

语义：需要发出何种控制信息，完成何种动作以及做出何种响应。 

同步：事件实现顺序的详细说明。 

<u>由此可见，网络协议是计算机网络的不可缺少的组成部分。</u>

**协议的两种形式**

一种是使用便于人来阅读和理解的文字描述。

另一种是使用让计算机能够理解的程序代码。

这两种不同形式的协议都必须能够对网络上信息交换过程做出精确的解释。

**层次式协议结构**

ARPANET 的研制经验表明，对于非常复杂的计算机网络协议，其结构应该是层次式的。

**划分层次的概念举例** 

![分层思想传递举例](img/第一章/分层思想传递举例.png)

**主机 1 向主机 2 发送数据** 

注意观察加入或剥去首部（尾部）的层次

![分层数据帧举例](img/第一章/分层数据帧举例.png)

![](images/QQ截图20200322100439.png)

![](images/QQ截图20200322100502.png)

![](images/QQ截图20200322100526.png)

![](images/QQ截图20200322100544.png)

![](images/QQ截图20200322100601.png)

OSI 参考模型把对等层次之间传送的数据单位称为该层的协议数据单元 PDU (Protocol Data Unit)。这个名词现已被许多非 OSI 标准采用。

任何两个同样的层次把数据（即数据单元加上控制信息）通过水平虚线直接传递给对方。这就是所谓的“对等层”(peer layers)之间的通信。

各层协议实际上就是在各个对等层之间传递数据时的各项规定。

**分层的好处与缺点** 

|      **优点**      |                        **缺点**                        |
| :----------------: | :----------------------------------------------------: |
| 各层之间是独立的。 |                       降低效率。                       |
|  结构上可分割开。  | 有些功能会在不同的层次中重复出现，因而产生了额外开销。 |
|   易于实现和维护   |                                                        |
|     灵活性好。     |                                                        |

### 1.6.4  实体、协议、服务和服务访问点

**实体**

![协议](img/第一章/协议.png)

**协议和服务在概念上是不一样的**

![水平协议与垂直服务](img/第一章/水平协议与垂直服务.png)

**服务访问点**

- 同一系统相邻两层的实体进行交互的地方，称为服务访问点 SAP (Service Access Point)。 
- 服务访问点SAP是一个抽象的概念，它实际上就是一个逻辑接口。

![数据单元名称](img/第一章/数据单元名称.png)



**TCP/IP 体系结构的另一种表示方法**

实际上，现在的互联网使用的 TCP/IP 体系结构有时已经发生了演变，即某些应用程序可以直接使用 IP 层，或甚至直接使用最下面的网络接口层。

![](images/QQ截图20200322101119.png)

![](images/QQ截图20200322101148.png)



**客户进程和服务器进程使用 TCP/IP 协议栈进行通信**

![](images/QQ截图20200322101220.png)

**功能较强的计算机可同时运行多个服务器进程** 

![](images/QQ截图20200322101256.png)















