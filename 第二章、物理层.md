# 第二章、物理层

## 2.1  物理层的基本概念

物理层考虑的是怎样才能在连接各种计算机的传输媒体上传输数据比特流，而不是指具体的传输媒体。

物理层的作用是要尽可能地屏蔽掉不同传输媒体和通信手段的差异。

用于物理层的协议也常称为物理层规程 (procedure)。

### 2.1.1物理层的主要任务

<u>主要任务：确定与传输媒体的接口的一些特性。</u>

**机械特性** ：指明接口所用接线器的<font color='red'>形状</font>和<font color='red'>尺寸</font>、<font color='red'>引线数目</font>和<font color='red'>排列</font>、<font color='red'>固定</font>和<font color='red'>锁定装置</font>等。
**电气特性**：指明在接口电缆的各条线上出现的<font color='red'>电压的范围</font>。
**功能特性**：指明某条线上出现的<font color='red'>某一电平的电压表示何种意义</font>。
**过程特性** ：指明对于不同功能的各种可能<font color='red'>事件的出现顺序</font>。 



## 2.2  数据通信的基础知识

### 2.2.1  数据通信系统的模型

<u>一个数据通信系统包括三大部分：源系统（或发送端、发送方）、传输系统（或传输网络）和目的系统（或接收端、接收方）。</u>



![数据通信系统模型](img/第二章/数据通信系统模型.png)



##### **常用术语**

数据 —— 运送消息的实体。
信号—— 数据的电气的或电磁的表现。 
**<font color='red'>模拟信号</font>** —— 代表消息的参数的取值是**<font color='red'>连续</font>**的。 
**<font color='red'>数字信号</font>** —— 代表消息的参数的取值是**<font color='red'>离散</font>**的。 
码元 —— 在使用时间域（或简称为时域）的波形表示数字信号时，代表<font color='red'>不同离散数值的基本波形</font>。

![码元](img/第二章/码元.png)

### 2.2.2 传输方式

![传输方式 ](img/第二章/传输方式 .png)

信道 —— 一般用来表示向某一个方向传送信息的媒体。
单向通信（**单工通信**）——只能有一个方向的通信而没有反方向的交互。
双向交替通信（**半双工通信**）——通信的双方都可以发送信息，但不能双方同时发送(当然也就不能同时接收)。
双向同时通信（**全双工通信**）——通信的双方可以同时发送和接收信息。 

### 2.2.3  有关信道的几个基本概念

**<font color='red'>模拟信号转数字信号——采样、量化、编码</font>**

基带信号（即基本频带信号）—— 来自信源的信号。像计算机输出的代表各种文字或图像文件的数据信号都属于基带信号。
基带信号往往包含有较多的低频成分，甚至有直流成分，而许多信道并不能传输这种低频分量或直流分量。因此必须对基带信号进行调制 (modulation)。   

调制分为两大类：

基带调制：仅对基带信号的波形进行变换，使它能够与信道特性相适应。变换后的信号仍然是基带信号。把这种过程称为编码 (coding)。

带通调制：使用载波 (carrier)进行调制，把基带信号的频率范围搬移到较高的频段，并转换为模拟信号，这样就能够更好地在模拟信道中传输（即仅在一段频率范围内能够通过信道） 。

带通信号 ：经过载波调制后的信号。

#### (1) 常用编码方式

**不归零制**：正电平代表 1，负电平代表 0。
**归零制**：正脉冲代表 1，负脉冲代表 0。每次电平变化电压都要归零
**曼彻斯特编码**：位周期中心的向下跳变代表 1，位周期中心的**向上跳变代表 0**。但也可反过来定义。
**差分曼彻斯特编码**：1便于前一个码元相反，0则复制上一个码元

![编码](img/第二章/编码.png)



从信号波形中可以看出，曼彻斯特 (Manchester) 编码和差分曼彻斯特编码产生的信号频率比不归零制高。
从自同步能力来看，不归零制不能从信号波形本身中提取信号时钟频率（这叫作没有自同步能力），而曼彻斯特编码和差分曼彻斯特编码具有自同步能力。

#### (2) 基本的带通调制方法

- 基带信号往往包含有较多的低频成分，甚至有直流成分，而许多信道并不能传输这种低频分量或直流分量。为了解决这一问题，就必须对基带信号进行调制 (modulation)。 
- 最基本的二元制调制方法有以下几种：
  - 调幅(AM)：载波的振幅随基带数字信号而变化。 
  - 调频(FM)：载波的频率随基带数字信号而变化。
  - 调相(PM) ：载波的初始相位随基带数字信号而变化。  

![调制方法](img/第二章/调制方法.png)



正交振幅调制 QAM(Quadrature Amplitude Modulation) 

将幅度与相位结合

**举例**

为了达到更高的信息传输速率，必须采用技术上更为复杂的多元制的振幅相位混合调制方法。

<img src="images/QQ截图20200322102812.png" style="zoom:50%;" />

例如：
可供选择的相位有 12 种，而对于每一种相位有 1 或 2 种振幅可供选择。总共有 16 种组合，即 16 个码元。
由于 4 bit 编码共有 16 种不同的组合，因此这 16 个点中的每个点可对应于一种 4 bit 的编码。数据传输率可提高 4 倍。 

不是码元越多越好。若每一个码元可表示的比特数越多，则在接收端进行解调时要正确识别每一种状态就越困难，出错率增加。 



### 2.2.4  信道的极限容量

任何实际的信道都不是理想的，在传输信号时会产生各种失真以及带来多种干扰。 

码元传输的速率越高，或信号传输的距离越远，或传输媒体质量越差，在信道的输出端的波形的失真就越严重。 

**数字信号通过实际的信道** 

![失真](img/第二章/失真.png)

从概念上讲，限制码元在信道上的传输速率的因素有以下两个：

- 信道能够通过的频率范围
- 信噪比

#### (1) 信道能够通过的频率范围

具体的信道所能通过的频率范围总是有限的。信号中的许多高频分量往往不能通过信道。
1924年，奈奎斯特 (Nyquist) 就推导出了著名的奈氏准则。他给出了在假定的理想条件下，为了避免码间串扰，码元的传输速率的上限值。

<u>在任何信道中，码元传输的速率是有上限的，否则就会出现码间串扰的问题，使接收端对码元的判决（即识别）成为不可能。</u>

<u>如果信道的频带越宽，也就是能够通过的信号高频分量越多，那么就可以用更高的速率传送码元而不出现码间串扰</u> 

**奈奎斯特公式**

![奈奎斯特公式](img/第二章/奈奎斯特公式.png)

![奈奎斯特例子](img/第二章/奈奎斯特例子.png)

​																						带入为2 * 3kHZ * log以2为底16的对数

#### (2) 信噪比

噪声存在于所有的电子设备和通信信道中。
噪声是随机产生的，它的瞬时值有时会很大。因此噪声会使接收端对码元的判决产生错误。
但噪声的影响是相对的。**如果信号相对较强，那么噪声的影响就相对较小。**
<font color='red'>**信噪比就是信号的平均功率和噪声的平均功率之比**</font>。常记为 S/N，并用分贝 (dB) 作为度量单位。即：
		信噪比(dB) = 10 log10(S/N)    (dB) 
例如，当 S/N = 10 时，信噪比为 10 dB，而当 S/N = 1000时，信噪比为 30 dB。  

**香农公式**

![香农公式](img/第二章/香农公式.png)

**香农公式表明** 

信道的带宽或信道中的信噪比越大，则信息的极限传输速率就越高。 

只要信息传输速率低于信道的极限信息传输速率，就一定可以找到某种办法来实现无差错的传输。 

若信道带宽 W 或信噪比 S/N 没有上限（当然实际信道不可能是这样的），则信道的极限信息传输速率 C 也就没有上限。

实际信道上能够达到的信息传输速率要比香农的极限传输速率低不少。  

**请注意** 

<font color='red'>**无噪声用奈奎斯特公式**</font>
<font color='red'>**有噪声用香农公式**</font>

对于频带宽度已确定的信道，如果信噪比不能再提高了，并且码元传输速率也达到了上限值，那么还有办法提高信息的传输速率。
这就是：用编码的方法让每一个码元携带更多比特的信息量。 



## 2.3  物理层下面的传输媒体

传输媒体也称为传输介质或传输媒介，它就是数据传输系统中在发送器和接收器之间的物理通路。
传输媒体可分为两大类，即导引型传输媒体和非导引型传输媒体。
在导引型传输媒体中，电磁波被导引沿着固体媒体（铜线或光纤）传播。
非导引型传输媒体就是指自由空间。在非导引型传输媒体中，电磁波的传输常称为无线传输。

### 2.3.1  导引型传输媒体

**双绞线**
最常用的传输媒体。
模拟传输和数字传输都可以使用双绞线，其通信距离一般为几到十几公里。

无屏蔽双绞线 UTP：易受环境噪声或其他双绞线干扰，易于安装部署
屏蔽双绞线 STP：在<font color='red'>每对双绞线外包装金属包层</font>
铝箔屏蔽双绞线FTP：在<font color='red'>所有双绞线外包装金属包层</font>
双屏蔽双绞线S/STP：用金属包层<font color='red'>即对所有双绞线包装，又对每对双绞线包装</font>

![双绞线](img/第二章/双绞线.png)

**同轴电缆**

同轴电缆具有很好的抗干扰特性，被广泛用于传输较高速率的数据。
同轴电缆的带宽取决于电缆的质量。
50 Ω同轴电缆 —— LAN / 数字传输常用
75 Ω 同轴电缆 —— 有线电视 / 模拟传输常用

![同轴电缆](img/第二章/同轴电缆.png)

**光缆**
光纤是光纤通信的传输媒体。
由于可见光的频率非常高，约为 108 MHz 的量级，因此一个光纤通信系统的传输带宽远远大于目前其他各种传输媒体的带宽。

**光纤的工作原理**

![光纤原理](img/第二章/光纤原理.png)

只要从纤芯中射到纤芯表面的光线的入射角大于某个临界角度，就可产生全反射。

![单模光纤与多模光纤](img/第二章/单模光纤与多模光纤.png)

| 单模光纤                                                     | 多模光纤                                                     |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 若光纤的直径减小到只有一个光的波长，则光纤就像一根波导那样，它可使光线一直向前传播，而不会产生多次反射。这样的光纤称为单模光纤。 | 可以存在多条不同角度入射的光线在一条光纤中传输。这种光纤就称为多模光纤。 |



**光纤通信中使用的光波的波段**

常用的三个波段的中心分别位于 850 nm, 1300 nm 和 1550 nm。
所有这三个波段都具有 25000~30000 GHz 的带宽，可见光纤的通信容量非常大。

**光纤优点**

- 通信容量非常大。
- 传输损耗小，中继距离长。
- 抗雷电和电磁干扰性能好。
- 无串音干扰，保密性好。
-  体积小，重量轻。

### 2.3.2  非导引型传输媒体

- 将自由空间称为“非导引型传输媒体”。
- 无线传输所使用的频段很广。
- 短波通信（即高频通信）主要是靠电离层的反射，但短波信道的通信质量较差，传输速率低。
- 微波在空间主要是直线传播。
- 传统微波通信有两种方式：
  - 地面微波接力通信
  - 卫星通信  


## 2.4  信道复用技术

### 2.4.1  频分复用、时分复用和统计时分复用

复用 (multiplexing) 是通信技术中的基本概念。
它允许用户使用一个共享信道进行通信，降低成本，提高利用率。

![复用技术](img/第二章/复用技术.png)

**频分复用 FDM (Frequency Division Multiplexing)** 

将整个带宽分为多份，用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带。
请注意，这里的“带宽”是<u>频率带宽</u>而不是数据的发送速率。 

![频分复用](img/第二章/频分复用.png)

**时分复用TDM (Time Division Multiplexing) **

类比操作系统的<u>并发</u>

![时分复用](img/第二章/时分复用.png)



时分复用可能会造成线路资源的浪费 

使用时分复用系统传送计算机数据时，由于计算机数据的突发性质，用户对分配到的子信道的利用率一般是不高的。

![时分复用缺点](img/第二章/时分复用缺点.png)

**统计时分复用 STDM (Statistic TDM)**  

![统计时分复用](img/第二章/统计时分复用.png)

### 2.4.2  波分复用

 波分复用 WDM (Wavelength Division Multiplexing)  

波分复用就是光的频分复用。使用一根光纤来同时传输多个光载波信号。

![波分复用](img/第二章/波分复用.png)



### 2.4.3  码分复用

常用的名词是**码分多址 CDMA** 。各用户使用经过特殊挑选的不同码型，因此彼此不会造成干扰。这种系统发送的信号有很强的抗干扰能力，其频谱类似于白噪声，不易被敌人发现。 

**码片序列(chip sequence)** 

在CDMA中，每一个比特时间再划分成m各短的间隔，称为码片，通常m的值是64或128.（后续用8位方标描述）

使用CDMA的每一个站被指派一个唯一的m bit码片序列

**一个站发送比特1时，节点就发送其码片序列**

**一个站发送比特0时，节点就发送其码片序列的反码**

分配给每个站的 <font color='red'>**码片序列必须各不相同**</font>

分配给每个站的 <font color='red'>**码片序列必须相互正交**</font>

向量S表示站S的码片序列，向量T表示其他任何站的码片序列

则 S * T ≡ 0		S * T反 ≡ 0		S * S ≡ 1		S * S反 ≡ -1 

例如：A的码片序列被指定为00011011，为方便描述，码片序列采用双极型的形式表示

​			A发送00011011就表示发送比特1			A的码片序列的双极型：(-1 -1 -1 +1 +1 -1 +1 +1)

​			A发送11100100就表示发送比特0			A的反码片序列的双极型：(+1 +1 +1 -1 -1 +1 -1 -1)

​			B的码片序列被指定为00101110

​			B发送00101110就表示发送比特1			B的码片序列的双极型：(-1 -1 +1 -1 +1 +1 +1 -1)

​			B发送11010001就表示发送比特0			B的反码片序列的双极型：(+1 +1 -1 +1 -1 -1 -1 +1)

若 A + B反 = S 则最终输出S = (0 0 -2 +2 0 -2 0 +2)，表示A发送比特1，B发送比特0

计算表示为：  A	  	(-1   -1 -1 +1 +1 -1 +1 +1)

​			  	+	 B反      (+1 +1 -1 +1  -1 -1  -1 +1)

​						S     =  ( 0   0  -2  +2  0  -2  0  +2)

若要根据最终输出S判断其他站是否有发送数据，则用该站码片序列与向量S进行求内积运算

例如：C的码片序列的双极型表示为(-1 +1 -1 +1 +1 +1 -1 -1)，S =(0 0 -2 +2 0 -2 0 +2)

​			[(-1)(0) + (+1)(0) + (-1)(-2) + (+1)(+2) + (+1)(0) + (+1)(-2) + (-1)(0) + (-1)(+2)]/8=0,不发送比特

**规格化内积**：

![规格化内积公式](img/第二章/规格化内积公式.png)![规格化内积](img/第二章/规格化内积.png)

**<font color='red'>若计算结果为1，则该站点发送比特1</font>**

**<font color='red'>若计算结果为-1，则该站点发送比特0</font>**

<font color='red'>**若计算结果为0，则该站点不发送比特**</font>

![码分复用](img/第二章/码分复用.png)

**码片序列实现了扩频**

假定S站要发送信息的数据率为 b bit/s。由于每一个比特要转换成 m 个比特的码片，因此 S 站实际上发送的数据率提高到 mb bit/s，同时 S 站所占用的频带宽度也提高到原来数值的 m 倍。
这种通信方式是扩频(spread spectrum)通信中的一种。
扩频通信通常有两大类：
	一种是直接序列扩频DSSS (Direct Sequence Spread Spectrum)，如上面讲的使用码片序列就是这一类。
	另一种是跳频扩频FHSS (Frequency Hopping Spread Spectrum)。

**CDMA 的重要特点**

每个站分配的码片序列不仅必须各不相同，并且还必须互相正交 (orthogonal)。
在实用的系统中是使用<u>伪随机码序列</u>。 

**正交关系的另一个重要特性** 

任何一个码片向量和该码片向量自己的规格化内积都是 1 。

<img src="images/QQ截图20200322111427.png" style="zoom:67%;" />

一个码片向量和该码片反码的向量的规格化内积值是 –1。 

**CDMA 的工作原理** 

![HFC网](img/第二章/HFC网.png)

## 2.5  宽带接入技术

用户要连接到互联网，必须先连接到某个 ISP。
在互联网的发展初期，用户都是利用电话的用户线通过调制解调器连接到 ISP 的，电话用户线接入到互联网的速率最高只能达到 56 kbit/s。
美国联邦通信委员会 FCC 认为只要双向速率之和超过 200 kbit/s 就是宽带。

从宽带接入的媒体来看，可以划分为两大类：
	有线宽带接入
	无线宽带接入
下面讨论有线的宽带接入。

#### 2.5.1  ADSL 技术

非对称数字用户线 ADSL (Asymmetric Digital Subscriber Line) 技术就是用数字技术对现有的模拟电话用户线进行改造，使它能够承载宽带业务。

标准模拟电话信号的频带被限制在 300~3400 Hz 的范围内，但用户线本身实际可通过的信号频率仍然超过 1 MHz。

ADSL 技术就把 0~4 kHz 低端频谱留给传统电话使用，而把原来没有被利用的高端频谱留给用户上网使用。

DSL 就是数字用户线 (Digital Subscriber Line) 的缩写。

**DSL 的几种类型** 

<font color='red'>ADSL</font> (Asymmetric Digital Subscriber Line)：非对称数字用户线。**下载速度比上传速度快**
<font color='red'>HDSL</font> (High speed DSL)：高速数字用户线
<font color='red'>SDSL</font> (Single-line DSL)： 对线的数字用户线。**下载速度与上传速度相同**
<font color='red'>VDSL</font> (Very high speed DSL)：甚高速数字用户线。与ADSL相同但快了三倍，**短距离用铜线，长距离用光纤**
<font color='red'>DSL</font> (Digital Subscriber Line) ：数字用户线。
<font color='red'>RADSL</font> (Rate-Adaptive DSL)：速率自适应 DSL，是 ADSL 的一个子集，可自动调节线路速率）。 

##### **ADSL 的特点**

**上行和下行带宽做成<font color='red'>不对称</font>的。**

**上行数据与下行数据的<font color='red'>速率是不相同</font>的**

上行指从用户到 ISP，而下行指从 ISP 到用户。
ADSL 在用户线（铜线）的两端各安装一个 ADSL 调制解调器。
我国目前采用的方案是离散多音调 DMT (Discrete Multi-Tone)调制技术。
​这里的“多音调”就是“多载波”或“多子信道”的意思。

#### 2.5.2  光纤同轴混合网（HFC网）

HFC (Hybrid Fiber Coax) 网是在目前覆盖面很广的有线电视网 CATV 的基础上开发的一种居民宽带接入网。
HFC 网除可传送 CATV 外，还提供电话、数据和其他宽带交互型业务。
现有的 CATV 网是树形拓扑结构的同轴电缆网络，它采用模拟技术的频分复用对电视节目进行单向传输。
HFC 网对 CATV 网进行了改造。 

<font color='red'>**HFC 网的主干线路采用光纤**</font>

HFC 网将原 CATV 网中的同轴电缆主干部分改换为光纤，并使用模拟光纤技术。
在模拟光纤中采用光的振幅调制 AM，这比使用数字光纤更为经济。
模拟光纤从头端连接到光纤结点 (fiber node)，即光分配结点 ODN (Optical Distribution Node)。在光纤结点光信号被转换为电信号。在光纤结点以下就是同轴电缆。   

**HFC 网采用结点体系结构 **

![HFC网](img/第二章/HFC网.png)

**HFC 网具有双向传输功能，扩展了传输频带**

#### 2.5.3  FTTx 技术

FTTx 是一种实现宽带居民接入网的方案，代表多种宽带光纤接入方式。
FTTx 表示 Fiber To The…（光纤到…），例如：
	光纤到户 FTTH (Fiber To The Home)：光纤一直铺设到用户家庭，可能是居民接入网最后的解决方法。
	光纤到大楼 FTTB (Fiber To The Building)：光纤进入大楼后就转换为电信号，然后用电缆或双绞线分配到各用户。
	光纤到路边 FTTC (Fiber To The Curb)：光纤铺到路边，从路边到各用户可使用星形结构双绞线作为传输媒体。
